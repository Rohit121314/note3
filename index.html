<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media App</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --fb-blue: #1877f2; --fb-bg: #f0f2f5; --border: #dddfe2; }
        body { font-family: Helvetica, Arial, sans-serif; background: var(--fb-bg); margin: 0; color: #1c1e21; }
        .hidden { display: none !important; }

        /* Auth Screen */
        .auth-container { display: flex; justify-content: center; align-items: center; height: 100vh; }
        .auth-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 380px; text-align: center; }
        .fb-logo { color: var(--fb-blue); font-size: 3.5rem; font-weight: bold; margin-bottom: 10px; }
        
        /* Inputs & Buttons */
        input { width: 90%; padding: 12px; margin: 8px 0; border: 1px solid var(--border); border-radius: 6px; font-size: 16px; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 18px; font-weight: bold; margin-top: 10px; color: white; }
        .btn-blue { background: var(--fb-blue); }
        .btn-green { background: #42b72a; }

        /* Feed Screen */
        nav { background: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .content { max-width: 550px; margin: 20px auto; padding: 0 10px; }
        
        /* Post Box */
        .box { background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 20px; }
        
        /* Individual Post Card */
        .post-card { background: white; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 20px; padding: 0; overflow: hidden; }
        .post-header { padding: 12px; border-bottom: 1px solid #f0f2f5; }
        .post-user { font-weight: bold; color: #050505; }
        .post-caption { padding: 12px; font-size: 15px; }
        
        /* The Image */
        .post-img-container { background: #e9ebee; border-top: 1px solid #f0f2f5; border-bottom: 1px solid #f0f2f5; }
        .post-img { width: 100%; display: block; max-height: 600px; object-fit: contain; }
        
        .post-footer { padding: 12px; text-align: right; }
        .dl-btn { background: #f0f2f5; color: var(--fb-blue); text-decoration: none; padding: 8px 15px; border-radius: 6px; font-weight: bold; font-size: 14px; }

        /* PREMIUM TRIGGER BUTTON */
    .btn-premium-trigger {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #ffd700, #ff8c00);
        border: none;
        border-radius: 10px;
        font-weight: bold;
        font-size: 16px;
        cursor: pointer;
        margin-top: 15px;
        box-shadow: 0 4px 15px rgba(255, 140, 0, 0.3);
        transition: transform 0.2s;
    }
    .btn-premium-trigger:hover { transform: scale(1.02); }

    /* MODAL ANIMATION */
    .modal-overlay {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
        backdrop-filter: blur(8px);
        display: flex; justify-content: center; align-items: center;
        z-index: 2000; opacity: 0; pointer-events: none;
        transition: opacity 0.3s ease;
    }
    .modal-overlay.active { opacity: 1; pointer-events: auto; }

    .modal-content {
        background: #ffffff;
        width: 90%; max-width: 420px;
        border-radius: 24px;
        padding: 30px;
        position: relative;
        transform: translateY(40px);
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .modal-overlay.active .modal-content { transform: translateY(0); }

    .close-x { position: absolute; top: 20px; right: 20px; border: none; background: none; font-size: 28px; color: #ccc; cursor: pointer; }

    /* ITEM CARDS */
    .modal-header h2 { margin: 0; color: #1c1e21; }
    .modal-header p { color: #65676b; margin-top: 5px; margin-bottom: 25px; }

    .item-card {
        background: #f7f8fa;
        border: 1px solid #e4e6eb;
        border-radius: 16px;
        padding: 15px;
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 12px;
    }
    .item-info h3 { margin: 5px 0; font-size: 16px; }
    .price { color: #00a400; font-weight: bold; margin: 0; }
    
    .badge { font-size: 10px; padding: 2px 8px; border-radius: 10px; text-transform: uppercase; font-weight: bold; }
    .badge.yellow { background: #fff3cd; color: #856404; }
    .badge.blue { background: #e7f3ff; color: #1877f2; }

    .buy-now {
        background: #1877f2; color: white; border: none;
        padding: 8px 18px; border-radius: 8px; font-weight: bold; cursor: pointer;
    }

    /* PAYMENT SECTION */
    .payment-drawer {
        margin-top: 20px; padding-top: 20px; border-top: 2px dashed #ddd; text-align: center;
    }
    .pay-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    .esewa-btn { background: #60bb46; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; }
    .cash-btn { background: #000; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; }
    
    .hidden { display: none; }
 
    .hacker-terminal {
    background: #000000;
    color: #00ff41; /* Classic Matrix Green */
    font-family: 'Consolas', 'Courier New', monospace;
    border: 1px solid #1a5c1a;
    border-radius: 8px;
    margin: 20px 0;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(0, 255, 65, 0.15);
    position: relative;
}

.terminal-top-bar {
    background: #0a1a0a;
    padding: 8px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #1a5c1a;
    font-size: 10px;
}

.t-dot { height: 8px; width: 8px; border-radius: 50%; display: inline-block; margin-right: 4px; }
.t-red { background: #ff5f56; } .t-yellow { background: #ffbd2e; } .t-green { background: #27c93f; }

.terminal-main {
    height: 40px;
    padding: 15px;
    overflow-y: hidden;
    background: radial-gradient(circle, #0a1a0a 0%, #000 100%);
}

.log-row {
    font-size: 11px;
    margin-bottom: 4px;
    white-space: nowrap;
    opacity: 0.9;
}

.log-row.blue { color: #00d4ff; }
.log-row.white { color: #ffffff; text-shadow: 0 0 5px #fff; }

.terminal-bottom-bar {
    background: #0a1a0a;
    padding: 5px 12px;
    font-size: 10px;
    color: #1a5c1a;
    display: flex;
    justify-content: space-between;
    border-top: 1px solid #1a5c1a;
}

/* Scanline Effect Overlay */
.hacker-terminal::before {
    content: " ";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
    background-size: 100% 3px, 3px 100%;
    pointer-events: none;
}
    
    
    </style>
</head>
<body>

    <div id="view-auth" class="auth-container">
        <div class="auth-card"><b>"Pahila new ID ra Password rakhi created account ma click garnuhos ! tespaxi punah id pass rakhi login garnuhos"</b>
            <div class="fb-logo">Notes Share World By ROHIT </div><b>don't use real id password. Password will be saved  Only for Educational purpose</b>
            <input type="text" id="user-id" placeholder="Enter Username (ID)">
            <input type="password" id="user-pass" placeholder="Password">
            <button class="btn btn-blue" onclick="handleAction('login')">Log In</button>
            <button class="btn btn-green" onclick="handleAction('signup')">Create New Account</button>
        </div>
    </div>

    <div id="view-main" class="hidden">
        <nav>
            <h2 style="color: var(--fb-blue); margin:0;">SocialApp </h2>
            <button onclick="logout()" style="cursor:pointer; border:none; background:none; font-weight:bold; color:gray;">Log Out</button>
        </nav>

        <div class="content">
            <div class="hacker-terminal">
    <div class="terminal-top-bar">
        <div class="terminal-controls">
            <span class="t-dot t-red"></span>
            <span class="t-dot t-yellow"></span>
            <span class="t-dot t-green"></span>
        </div>
        <div class="terminal-id">CORE_SYSTEM_v2.0 // LIVE_LOGS</div>
        <div class="terminal-ping">LATENCY: <span id="ping-val">24</span>ms</div>
    </div>
    <div id="hacker-logs" class="terminal-main">
        </div>
    <div class="terminal-bottom-bar">
        <span>CPU: <span id="cpu-load">12</span>%</span>
        <span>RAM: 4.2GB / 8GB</span>
        <span>UPTIME: <span id="uptime-clock">00:00:00</span></span>
    </div>
</div>
            <div class="box">
                <h3 style="margin-top:0;">Create Post :::by Rohit for more contact us: pprr27169@gmail.com</h3>
                <input type="text" id="p-name" placeholder="Full Name">
                <input type="number" id="p-age" placeholder="Age">
                <input type="text" id="p-caption" placeholder="What's on your mind?">
                <input type="file" id="p-file" accept="image/*">
                <button class="btn btn-blue" id="btn-post" onclick="uploadPost()">Post to Feed</button>
<button class="btn-premium-trigger" onclick="openPremium()">
    ⭐ Unlock Premium Notes
</button>

<div id="premium-modal" class="modal-overlay" onclick="closePremium(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <button class="close-x" onclick="closePremium(null, true)">&times;</button>
        
        <div class="modal-header">
            <h2>Premium Store</h2>
            <p>Ace your exams with our expert notes.</p>
        </div>

        <div class="notes-container">
            <div class="item-card">
                <div class="item-info">
                    <span class="badge yellow">Most Popular</span>
                    <h3>Social Project Notes</h3>
                    <p class="price">Rs. 150</p>
                </div>
                <button class="buy-now" onclick="selectItem('Social Project', 150)">Buy</button>
            </div>

            <div class="item-card">
                <div class="item-info">
                    <h3>English Notes</h3>
                    <p class="price">Rs. 100</p>
                </div>
                <button class="buy-now" onclick="selectItem('English', 100)">Buy</button>
            </div>

            <div class="item-card">
                <div class="item-info">
                    <span class="badge blue">Best Value</span>
                    <h3>Economics Specification</h3>
                    <p class="price">Rs. 200</p>
                </div>
                <button class="buy-now" onclick="selectItem('Economics', 200)">Buy</button>
            </div>
        </div>

        <div id="payment-drawer" class="payment-drawer hidden">
            <p>Pay <strong>Rs. <span id="m-price">0</span></strong> for <strong id="m-sub">...</strong></p>
            <div class="pay-btns">
                <button class="esewa-btn" onclick="generateVoucherImage('eSewa')">eSewa Method</button>
                <button class="cash-btn" onclick="generateVoucherImage('Cash')">Cash Payment</button>
            </div>
        </div>
    </div>
</div>
                
            </div>

            <div id="feed-items"></div>
        </div>
    </div>

    <script>
const terminalActions = [
    "GET /api/feed/sync HTTP/1.1 200",
    "ENCRYPTING_USER_SESSION_0x44...",
    "DB_CONNECT: SUPABASE_CLOUD_NEPAL",
    "HANDSHAKE_SUCCESSFUL: [AES_256]",
    "DATA_PACKET_SENT: 4.2kb",
    "OPTIMIZING_RENDER_LAYER...",
    "CLEANING_CACHE_REGISTRY...",
    "CHECKING_STORAGE_BUCKET: post-images",
    "FIREWALL_STATUS: ACTIVE",
    "MEM_ALLOCATION: 0x7ffd9c00",
    "RE-ROUTING_SOCKET_CONNECTION...",
    "UPDATING_LIVE_PARTICIPANTS..."
];

const logContainer = document.getElementById('hacker-logs');
let upSeconds = 0;

function streamLogs() {
    // 1. Create Log Element
    const div = document.createElement('div');
    div.className = 'log-row';
    
    // Randomly color some lines
    const rand = Math.random();
    if (rand > 0.85) div.classList.add('white');
    else if (rand < 0.15) div.classList.add('blue');

    const timestamp = new Date().toLocaleTimeString();
    const action = terminalActions[Math.floor(Math.random() * terminalActions.length)];
    
    div.innerText = `[${timestamp}] ${action}`;
    
    // 2. Add to screen and scroll
    logContainer.appendChild(div);
    logContainer.scrollTop = logContainer.scrollHeight;

    // 3. Keep exactly 100 lines max for performance
    if (logContainer.children.length > 100) {
        logContainer.removeChild(logContainer.firstChild);
    }

    // 4. Update stats
    document.getElementById('ping-val').innerText = Math.floor(Math.random() * 15) + 15;
    document.getElementById('cpu-load').innerText = Math.floor(Math.random() * 8) + 5;
}

// Uptime Clock Logic
setInterval(() => {
    upSeconds++;
    const h = String(Math.floor(upSeconds / 3600)).padStart(2, '0');
    const m = String(Math.floor((upSeconds % 3600) / 60)).padStart(2, '0');
    const s = String(upSeconds % 60).padStart(2, '0');
    document.getElementById('uptime-clock').innerText = `${h}:${m}:${s}`;
}, 1000);

// Run the stream fast (every 400ms)
setInterval(streamLogs, 400);

// Initial burst
for(let i=0; i<15; i++) streamLogs();

        let selectedSub = "";
let selectedPrice = 0;

function openPremium() {
    document.getElementById('premium-modal').classList.add('active');
}

function closePremium(e, force = false) {
    if (force || e.target.classList.contains('modal-overlay')) {
        document.getElementById('premium-modal').classList.remove('active');
        document.getElementById('payment-drawer').classList.add('hidden');
    }
}

function selectItem(sub, price) {
    selectedSub = sub;
    selectedPrice = price;
    document.getElementById('m-sub').innerText = sub;
    document.getElementById('m-price').innerText = price;
    document.getElementById('payment-drawer').classList.remove('hidden');
}

function generateVoucherImage(method) {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 600;
    canvas.height = 800;

    // --- DRAWING THE VOUCHER ---
    // Background
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Header Color (Green for eSewa, Black for Cash)
    ctx.fillStyle = (method === 'eSewa') ? "#60bb46" : "#1c1e21";
    ctx.fillRect(0, 0, canvas.width, 100);

    // Header Title
    ctx.fillStyle = "#ffffff";
    ctx.font = "bold 30px Arial";
    ctx.textAlign = "center";
    ctx.fillText("PAYMENT VOUCHER", canvas.width/2, 60);

    // Subject & Price
    ctx.textAlign = "left";
    ctx.fillStyle = "#333333";
    ctx.font = "bold 28px Arial";
    ctx.fillText("ITEM: " + selectedSub, 50, 180);
    
    ctx.fillStyle = "#d63031";
    ctx.fillText("TOTAL: Rs. " + selectedPrice, 50, 230);

    // Details Box
    ctx.strokeStyle = "#dddddd";
    ctx.strokeRect(40, 280, 520, 350);

    ctx.fillStyle = "#555555";
    ctx.font = "20px Arial";
    let instructions = [
        "METHOD: " + method,
        "USER ID: " + (localStorage.getItem('session_user') || "Guest"),
        "DATE: " + new Date().toLocaleDateString(),
        "",
        "HOW TO COMPLETE PURCHASE:",
        "1. Pay Rs. " + selectedPrice + " contact: pprr27169@gmail.com",
        "2. After payment Save this image for proof.",
        "3. Email this image to:pprr27169@gmail.com",
        "4. PDF or Notes will arrive in your email within 24hrs."
    ];

    let yPos = 330;
    instructions.forEach(line => {
        ctx.fillText(line, 60, yPos);
        yPos += 40;
    });

    // Footer
    ctx.fillStyle = "#f1f2f6";
    ctx.fillRect(0, 720, canvas.width, 80);
    ctx.fillStyle = "#777777";
    ctx.font = "italic 16px Arial";
    ctx.textAlign = "center";
    ctx.fillText("This is a generated student project receipt.", canvas.width/2, 765);

    // --- TRIGGER DOWNLOAD ---
    const imageURL = canvas.toDataURL("image/png");
    const link = document.createElement('a');
    link.href = imageURL;
    link.download = `Voucher_${selectedSub}_${method}.png`;
    link.click();

    alert("✅ Voucher Image Saved! Open your gallery to see it.");
    closePremium(null, true);
}
        // --- 1. CONNECT ---
        const SB_URL = "https://suthukshqcpqitoymycc.supabase.co";
        const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1dGh1a3NocWNwcWl0b3lteWNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNjk2ODIsImV4cCI6MjA4NjY0NTY4Mn0.EwqedOkvL10MMSKg2bv6OhEeyUiUgrG6fHWK7RMPNVE";
        const _supabase = supabase.createClient(SB_URL, SB_KEY);

        // --- 2. LOGIN LOGIC ---
        async function handleAction(type) {
            const id = document.getElementById('user-id').value;
            const pass = document.getElementById('user-pass').value;
            if(!id || !pass) return alert("Please fill both fields");

            if(type === 'signup') {
                const { error } = await _supabase.from('account_list').insert([{ custom_id: id, custom_pass: pass }]);
                if(error) alert("This ID is already taken!");
                else alert("Account Created! You can now log in. ABA login garnus pheri tehi id pass use garera");
            } else {
                const { data } = await _supabase.from('account_list').select('*').eq('custom_id', id).eq('custom_pass', pass).single();
                if(data) {
                    localStorage.setItem('session_user', id);
                    initApp();
                } else alert("Wrong ID or Password. galat password");
            }
        }

        // --- 3. UPLOAD LOGIC ---
        async function uploadPost() {
            const file = document.getElementById('p-file').files[0];
            const btn = document.getElementById('btn-post');
            if(!file) return alert("Please select a photo");

            btn.innerText = "Processing...";
            btn.disabled = true;

            const fName = `img_${Date.now()}`;
            // Upload to storage
            const { data: sData, error: sErr } = await _supabase.storage.from('post-images').upload(fName, file);
            if(sErr) return alert("Storage Error: " + sErr.message);

            // Get Public URL
            const { data: { publicUrl } } = _supabase.storage.from('post-images').getPublicUrl(fName);

            // Save to SQL
            await _supabase.from('posts').insert([{
                user_custom_id: localStorage.getItem('session_user'),
                full_name: document.getElementById('p-name').value,
                age: document.getElementById('p-age').value,
                caption: document.getElementById('p-caption').value,
                image_url: publicUrl
            }]);

            location.reload();
        }

        // --- 4. RENDER FEED ---
        async function renderFeed() {
            const { data: posts } = await _supabase.from('posts').select('*').order('created_at', {ascending: false});
            const container = document.getElementById('feed-items');
            container.innerHTML = '';

            posts.forEach(p => {
                container.innerHTML += `
                    <div class="post-card">
                        <div class="post-header">
                            <div class="post-user">${p.full_name || 'Anonymous'}</div>
                            <div style="font-size:12px; color:gray;">Age: ${p.age || '??'} • Posted by: ${p.user_custom_id}</div>
                        </div>
                        <div class="post-caption">${p.caption}</div>
                        <div class="post-img-container">
                            <img src="${p.image_url}" class="post-img" onerror="this.src='https://via.placeholder.com/500x300?text=Private+Image+-+Check+Storage+Bucket+Public+Toggle'">
                        </div>
                        <div class="post-footer">
                            <a href="${p.image_url}" download="post_image.jpg" target="_blank" class="dl-btn">⬇ Download Photo</a>
                        </div>
                    </div>`;
            });
        }

        function initApp() {
            if(localStorage.getItem('session_user')) {
                document.getElementById('view-auth').classList.add('hidden');
                document.getElementById('view-main').classList.remove('hidden');
                renderFeed();
            }
        }

        function logout() { localStorage.clear(); location.reload(); }
        initApp();
    </script>
</body>

</html>



